<script>
  var aboutMe = "";
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover(); 
        $("#selector").select2();
        about_me = document.getElementById("about_me").getAttribute("data-about-me");
        if(about_me != "" && about_me != null){
          document.getElementById("about_me").innerHTML = about_me;
        }
    });
    $('#messageModal').on('shown.bs.modal', function () {
      $('#messageModal').focus()
    });
  </script>

<%= @course.name %><br>
<% @course.update_column(:ratings, @course.average_rate) %>

<span class="pull-left"><a data-toggle="popover" data-trigger="hover" title="Difficulty" data-content="How hard was the class? 1 being the easiest, 5 being the hardest."><strong class="">Difficulty </strong><span class="glyphicon glyphicon-info-sign"></span></a></span>
<%= rating_for @course, "difficulty", disable_after_rate: false, imdb_avg: false, cancel_off: "blank.jpg", cancel_on: "blank.jpg" %>

<span class="pull-left"><a data-toggle="popover" data-trigger="hover" title="Workload" data-content="How much work did this class take? 1 being the least, 5 being the most."><strong class="">Workload </strong><span class="glyphicon glyphicon-info-sign"></span></a></span>
<%= rating_for @course, "workload", disable_after_rate: false, imdb_avg: false, cancel_off: "blank.jpg", cancel_on: "blank.jpg" %>

<span class="pull-left"><a data-toggle="popover" data-trigger="hover" title="Enjoyment" data-content="How much did you like the class? 1 being the least, 5 being the most."><strong class="">Enjoyment </strong><span class="glyphicon glyphicon-info-sign"></span></a></span>
<%= rating_for @course, "enjoyment", disable_after_rate: false, imdb_avg: false, cancel_off: "blank.jpg", cancel_on: "blank.jpg" %>

<% if user_signed_in? %>
  description
  <%= best_in_place @course, :description %>
<% else %>
  <%= @course.description %>
<% end %>


<%= link_to "Write a Review", new_course_review_path(:course_id => @course.id), class: "btn btn-primary" %>

<% if @reviews.blank? %>
  <h3>No reviews yet. Be the first to write one!</h3>
<% else %>
  <% @reviews.each do |review| %>
    <p><%= review.Comment %></p>
    <p><%= review.created_at %></p>
    <p><%= link_to 'Download Syllabus', review.syllabus_url %></p>
    <%= link_to 'upvote', like_review_path(review), method: :put %>
    <%= link_to 'downvote', dislike_review_path(review), method: :put %>
    <%= link_to 'funnyvote', funny_review_path(review), method: :put %>
    <%= link_to 'flag', flag_review_path(review), method: :put %>
    score: <%= review.scoreReview %>
    funniness: <%= review.scoreFunny %>
    flag: <%= review.scoreFlag %>
  <% end %>
<% end %>


<%= form_for @course.questions.new do |f| %>
    <%= f.text_field :question %>
    <%= f.hidden_field :course_id, "value" => @course.id %>
    <%= f.hidden_field :userID, "value" => current_user.id %>
    <%= f.submit "Ask Question" %>
<% end %>

<% @course.questions.each do |q| %>
  <% if !q.question.nil? %>
      <%= q.question %>
      <%  q.answers.each do |a| %>
         <%= a.answer %>
      <% end %>
     <%= form_for q.answers.new do |f| %>
       <%= f.text_field :answer %>
       <%= f.submit "Answer Question" %>
       <%= f.hidden_field :question_id, "value" => @question.id %>
       <%= f.hidden_field :userID, "value" => current_user.id %>
     <% end %>
  <% end %> 
<% end %>














